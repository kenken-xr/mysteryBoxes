<template>
    <div class="recipe3">
        <div class="hidden">
            <img src="img/large/1.jpg" />
            <img src="img/large/2.jpg" />
            <img src="img/large/3.jpg" />
            <img src="img/large/4.jpg" />
            <img src="img/large/5.jpg" />
            <img src="img/large/6.jpg" />
            <img src="img/large/7.jpg" />
            <img src="img/large/8.jpg" />
            <img src="img/large/9.jpg" />
            <img src="img/large/10.jpg" />
            <img src="img/large/11.jpg" />
            <img src="img/large/12.jpg" />
            <img src="img/large/13.jpg" />
            <img src="img/large/14.jpg" />
            <img src="img/large/15.jpg" />
            <img src="img/large/16.jpg" />
            <img src="img/large/17.jpg" />
            <img src="img/large/18.jpg" />
            <img src="img/large/19.jpg" />
            <img src="img/large/20.jpg" />
            <img src="img/large/21.jpg" />
        </div>
        <main>
            <div class="frame">
                <div class="frame__title-wrap">
                    <h1 class="frame__title">Grid Reveal Effects</h1>
                    <div class="frame__links">
                        <a href="https://tympanus.net/Development/TextDistortionEffects/">Previous Demo</a>
                        <a href="https://tympanus.net/codrops/?p=38214">Article</a>
                        <a href="https://github.com/codrops/GridRevealEffects/">GitHub</a>
                    </div>
                </div>
                <div class="frame__nav">
                    <a>project</a>
                    <a>team</a>
                    <a>docs</a>
                </div>
                <span class="frame__main">Photostream</span>
                <span class="frame__version">v2.0.1</span>
                <div class="frame__demos">
                    <span>Effects:</span>
                    <a href="index.html" class="frame__demo">1</a>
                    <a href="index2.html" class="frame__demo">2</a>
                    <a href="index3.html" class="frame__demo">3</a>
                    <a href="index4.html" class="frame__demo frame__demo--current">4</a>
                </div>
            </div>
            <div class="content">
                <h2 class="content__title">Yerevan</h2>
            </div>
            <div class="grid-wrap">
                <div class="grid">
                    <div class="grid__item" data-title="London">
                        <div class="grid__item-inner" style="background-image:url(img/1.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Yerevan">
                        <div class="grid__item-inner" style="background-image:url(img/2.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Paris">
                        <div class="grid__item-inner" style="background-image:url(img/3.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Madrid">
                        <div class="grid__item-inner" style="background-image:url(img/4.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Moscow">
                        <div class="grid__item-inner" style="background-image:url(img/5.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Lagos">
                        <div class="grid__item-inner" style="background-image:url(img/6.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Dublin">
                        <div class="grid__item-inner" style="background-image:url(img/7.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Bangkok">
                        <div class="grid__item-inner" style="background-image:url(img/8.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Luanda">
                        <div class="grid__item-inner" style="background-image:url(img/9.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Buenos Aires">
                        <div class="grid__item-inner" style="background-image:url(img/10.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Berlin">
                        <div class="grid__item-inner" style="background-image:url(img/11.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Vienna">
                        <div class="grid__item-inner" style="background-image:url(img/12.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Minsk">
                        <div class="grid__item-inner" style="background-image:url(img/13.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Brussels">
                        <div class="grid__item-inner" style="background-image:url(img/14.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Lisbon">
                        <div class="grid__item-inner" style="background-image:url(img/15.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Porto-Novo">
                        <div class="grid__item-inner" style="background-image:url(img/16.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Sofia">
                        <div class="grid__item-inner" style="background-image:url(img/17.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Phnom Penh">
                        <div class="grid__item-inner" style="background-image:url(img/18.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Ottawa">
                        <div class="grid__item-inner" style="background-image:url(img/19.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Praia">
                        <div class="grid__item-inner" style="background-image:url(img/20.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Bogota">
                        <div class="grid__item-inner" style="background-image:url(img/21.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Beijing">
                        <div class="grid__item-inner" style="background-image:url(img/2.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Santiago">
                        <div class="grid__item-inner" style="background-image:url(img/4.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="N'Djamena">
                        <div class="grid__item-inner" style="background-image:url(img/6.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Bangui">
                        <div class="grid__item-inner" style="background-image:url(img/8.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Yaounde">
                        <div class="grid__item-inner" style="background-image:url(img/10.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Gitega">
                        <div class="grid__item-inner" style="background-image:url(img/12.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Ouagadougou">
                        <div class="grid__item-inner" style="background-image:url(img/1.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Bonn">
                        <div class="grid__item-inner" style="background-image:url(img/16.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Brasilia">
                        <div class="grid__item-inner" style="background-image:url(img/18.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Gaborone">
                        <div class="grid__item-inner" style="background-image:url(img/20.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Sarajevo">
                        <div class="grid__item-inner" style="background-image:url(img/19.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="La Paz">
                        <div class="grid__item-inner" style="background-image:url(img/17.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Thimphu">
                        <div class="grid__item-inner" style="background-image:url(img/15.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Belmopan">
                        <div class="grid__item-inner" style="background-image:url(img/13.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Bridgetown">
                        <div class="grid__item-inner" style="background-image:url(img/11.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Dhaka">
                        <div class="grid__item-inner" style="background-image:url(img/9.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Manama">
                        <div class="grid__item-inner" style="background-image:url(img/7.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Nassau">
                        <div class="grid__item-inner" style="background-image:url(img/5.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Baku">
                        <div class="grid__item-inner" style="background-image:url(img/3.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Canberra">
                        <div class="grid__item-inner" style="background-image:url(img/1.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Saint John's">
                        <div class="grid__item-inner" style="background-image:url(img/10.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Andorra la Vella">
                        <div class="grid__item-inner" style="background-image:url(img/11.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Algiers">
                        <div class="grid__item-inner" style="background-image:url(img/12.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Tirana">
                        <div class="grid__item-inner" style="background-image:url(img/13.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Kabul">
                        <div class="grid__item-inner" style="background-image:url(img/2.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Moroni">
                        <div class="grid__item-inner" style="background-image:url(img/15.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Brazzaville">
                        <div class="grid__item-inner" style="background-image:url(img/16.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Kinshasa">
                        <div class="grid__item-inner" style="background-image:url(img/17.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="San Jose">
                        <div class="grid__item-inner" style="background-image:url(img/18.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Yamoussoukro">
                        <div class="grid__item-inner" style="background-image:url(img/19.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Zagreb">
                        <div class="grid__item-inner" style="background-image:url(img/20.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Havana">
                        <div class="grid__item-inner" style="background-image:url(img/21.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Nicosia">
                        <div class="grid__item-inner" style="background-image:url(img/2.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Prague">
                        <div class="grid__item-inner" style="background-image:url(img/4.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Copenhagen">
                        <div class="grid__item-inner" style="background-image:url(img/6.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Djibouti">
                        <div class="grid__item-inner" style="background-image:url(img/8.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Roseau">
                        <div class="grid__item-inner" style="background-image:url(img/10.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Santo Domingo">
                        <div class="grid__item-inner" style="background-image:url(img/12.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Dili">
                        <div class="grid__item-inner" style="background-image:url(img/13.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Quito">
                        <div class="grid__item-inner" style="background-image:url(img/16.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Cairo">
                        <div class="grid__item-inner" style="background-image:url(img/18.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="San Salvador">
                        <div class="grid__item-inner" style="background-image:url(img/19.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Malabo">
                        <div class="grid__item-inner" style="background-image:url(img/17.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Asmara">
                        <div class="grid__item-inner" style="background-image:url(img/15.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Tallinn">
                        <div class="grid__item-inner" style="background-image:url(img/13.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Addis Ababa">
                        <div class="grid__item-inner" style="background-image:url(img/11.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Suva">
                        <div class="grid__item-inner" style="background-image:url(img/9.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Helsinki">
                        <div class="grid__item-inner" style="background-image:url(img/7.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Libreville">
                        <div class="grid__item-inner" style="background-image:url(img/5.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Banjul">
                        <div class="grid__item-inner" style="background-image:url(img/3.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Tbilisi">
                        <div class="grid__item-inner" style="background-image:url(img/1.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Accra">
                        <div class="grid__item-inner" style="background-image:url(img/10.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Athens">
                        <div class="grid__item-inner" style="background-image:url(img/11.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Saint George's">
                        <div class="grid__item-inner" style="background-image:url(img/12.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Guatemala City">
                        <div class="grid__item-inner" style="background-image:url(img/13.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Conakry">
                        <div class="grid__item-inner" style="background-image:url(img/14.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Bissau">
                        <div class="grid__item-inner" style="background-image:url(img/15.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Georgetown">
                        <div class="grid__item-inner" style="background-image:url(img/16.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Port-au-Prince">
                        <div class="grid__item-inner" style="background-image:url(img/17.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Tegucigalpa">
                        <div class="grid__item-inner" style="background-image:url(img/18.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Budapest">
                        <div class="grid__item-inner" style="background-image:url(img/19.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Reykjavik">
                        <div class="grid__item-inner" style="background-image:url(img/20.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="New Delhi">
                        <div class="grid__item-inner" style="background-image:url(img/21.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Jakarta">
                        <div class="grid__item-inner" style="background-image:url(img/2.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Tehran">
                        <div class="grid__item-inner" style="background-image:url(img/4.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Baghdad">
                        <div class="grid__item-inner" style="background-image:url(img/6.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Jerusalem">
                        <div class="grid__item-inner" style="background-image:url(img/8.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Rome">
                        <div class="grid__item-inner" style="background-image:url(img/10.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Kingston">
                        <div class="grid__item-inner" style="background-image:url(img/5.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Tokyo">
                        <div class="grid__item-inner" style="background-image:url(img/6.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Amman">
                        <div class="grid__item-inner" style="background-image:url(img/7.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Astana">
                        <div class="grid__item-inner" style="background-image:url(img/8.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Nairobi">
                        <div class="grid__item-inner" style="background-image:url(img/9.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Tarawa Atoll">
                        <div class="grid__item-inner" style="background-image:url(img/10.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Pyongyang">
                        <div class="grid__item-inner" style="background-image:url(img/11.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Seoul">
                        <div class="grid__item-inner" style="background-image:url(img/12.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Pristina">
                        <div class="grid__item-inner" style="background-image:url(img/13.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Kuwait City">
                        <div class="grid__item-inner" style="background-image:url(img/1.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Bishkek">
                        <div class="grid__item-inner" style="background-image:url(img/15.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Vientiane">
                        <div class="grid__item-inner" style="background-image:url(img/16.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Riga">
                        <div class="grid__item-inner" style="background-image:url(img/17.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Beirut">
                        <div class="grid__item-inner" style="background-image:url(img/1.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Maseru">
                        <div class="grid__item-inner" style="background-image:url(img/2.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Monrovia">
                        <div class="grid__item-inner" style="background-image:url(img/3.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Tripoli">
                        <div class="grid__item-inner" style="background-image:url(img/4.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Vaduz">
                        <div class="grid__item-inner" style="background-image:url(img/5.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Vilnius">
                        <div class="grid__item-inner" style="background-image:url(img/6.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Luxembourg">
                        <div class="grid__item-inner" style="background-image:url(img/7.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Skopje">
                        <div class="grid__item-inner" style="background-image:url(img/8.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Antananarivo">
                        <div class="grid__item-inner" style="background-image:url(img/9.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Lilongwe">
                        <div class="grid__item-inner" style="background-image:url(img/10.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Kuala Lumpur">
                        <div class="grid__item-inner" style="background-image:url(img/11.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Male">
                        <div class="grid__item-inner" style="background-image:url(img/12.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Bamako">
                        <div class="grid__item-inner" style="background-image:url(img/13.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Valletta">
                        <div class="grid__item-inner" style="background-image:url(img/14.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Majuro">
                        <div class="grid__item-inner" style="background-image:url(img/15.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Nouakchott">
                        <div class="grid__item-inner" style="background-image:url(img/16.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Port Louis">
                        <div class="grid__item-inner" style="background-image:url(img/17.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Mexico City">
                        <div class="grid__item-inner" style="background-image:url(img/18.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Palikir">
                        <div class="grid__item-inner" style="background-image:url(img/19.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Chisinau">
                        <div class="grid__item-inner" style="background-image:url(img/10.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Monaco">
                        <div class="grid__item-inner" style="background-image:url(img/5.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Ulaanbaatar">
                        <div class="grid__item-inner" style="background-image:url(img/6.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Podgorica">
                        <div class="grid__item-inner" style="background-image:url(img/7.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Rabat">
                        <div class="grid__item-inner" style="background-image:url(img/8.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Maputo">
                        <div class="grid__item-inner" style="background-image:url(img/9.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Naypyidaw">
                        <div class="grid__item-inner" style="background-image:url(img/10.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Windhoek">
                        <div class="grid__item-inner" style="background-image:url(img/11.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Kathmandu">
                        <div class="grid__item-inner" style="background-image:url(img/12.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Amsterdam">
                        <div class="grid__item-inner" style="background-image:url(img/13.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Wellington">
                        <div class="grid__item-inner" style="background-image:url(img/1.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Managua">
                        <div class="grid__item-inner" style="background-image:url(img/15.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Niamey">
                        <div class="grid__item-inner" style="background-image:url(img/16.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Abuja">
                        <div class="grid__item-inner" style="background-image:url(img/17.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Oslo">
                        <div class="grid__item-inner" style="background-image:url(img/1.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Muscat">
                        <div class="grid__item-inner" style="background-image:url(img/2.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Islamabad">
                        <div class="grid__item-inner" style="background-image:url(img/3.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Melekeok">
                        <div class="grid__item-inner" style="background-image:url(img/4.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Panama City">
                        <div class="grid__item-inner" style="background-image:url(img/5.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Port Moresby">
                        <div class="grid__item-inner" style="background-image:url(img/6.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Asuncion">
                        <div class="grid__item-inner" style="background-image:url(img/7.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Lima">
                        <div class="grid__item-inner" style="background-image:url(img/8.jpg)"></div>
                    </div>
                    <div class="grid__item" data-title="Manila">
                        <div class="grid__item-inner" style="background-image:url(img/9.jpg)"></div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</template>

<script>
    export default {
        name: 'recipe3',
        data() {
            return {

            };
        },
        methods: {

        },
        mounted() {
            /**
             * demo4.js
             * http://www.codrops.com
             *
             * Licensed under the MIT license.
             * http://www.opensource.org/licenses/mit-license.php
             * 
             * Copyright 2019, Codrops
             * http://www.codrops.com
             */
            {
                const MathUtils = {
                    lineEq: (y2, y1, x2, x1, currentVal) => {
                        // y = mx + b 
                        var m = (y2 - y1) / (x2 - x1),
                            b = y1 - m * x1;
                        return m * currentVal + b;
                    },
                    lerp: (a, b, n) => (1 - n) * a + n * b
                };

                // Window size
                let winsize;
                const calcWinsize = () => winsize = {
                    width: window.innerWidth,
                    height: window.innerHeight
                };
                calcWinsize();
                window.addEventListener('resize', calcWinsize);

                const getMousePos = (ev) => {
                    let posx = 0;
                    let posy = 0;
                    if (!ev) ev = window.event;
                    if (ev.pageX || ev.pageY) {
                        posx = ev.pageX;
                        posy = ev.pageY;
                    } else if (ev.clientX || ev.clientY) {
                        posx = ev.clientX + body.scrollLeft + docEl.scrollLeft;
                        posy = ev.clientY + body.scrollTop + docEl.scrollTop;
                    }
                    return {
                        x: posx,
                        y: posy
                    };
                }
                // Track the mouse position
                let mousePos = {
                    x: winsize.width / 2,
                    y: winsize.height / 2
                };
                window.addEventListener('mousemove', ev => mousePos = getMousePos(ev));

                // Custom mouse cursor.
                class CursorFx {
                    constructor(el) {
                        this.DOM = {
                            el: el
                        };
                        this.DOM.toggle = this.DOM.el.querySelector('.cursor__inner--circle');

                        this.DOM.title = this.DOM.el.querySelector('.cursor__inner--text');
                        this.bounds = {
                            toggle: this.DOM.toggle.getBoundingClientRect(),
                            title: this.DOM.title.getBoundingClientRect()
                        };
                        this.lastMousePos = {
                            toggle: {
                                x: mousePos.x - this.bounds.toggle.width / 2,
                                y: mousePos.y - this.bounds.toggle.height / 2
                            },
                            title: {
                                x: mousePos.x - this.bounds.title.width / 2,
                                y: mousePos.y - this.bounds.title.height / 2
                            }
                        };
                        this.lastScale = 1;
                        this.lastOpacity = 1;
                        requestAnimationFrame(() => this.render());
                    }
                    render() {
                        // Mouse movement distance on the x-axis
                        const diff = this.lastMousePos.toggle.x - (mousePos.x - this.bounds.toggle.width / 2);
                        // Check if mouse is on the right side of the viewport
                        const rightSide = mousePos.x >= winsize.width / 2;
                        // Switch the side of the title element
                        this.DOM.title.style.left = rightSide ? 'auto' : '30px';
                        this.DOM.title.style.right = rightSide ? '30px' : 'auto';
                        // The position of the title/toggle and the viewport side will determine the speed for both of these elements
                        const lerpFactor = {
                            toggle: rightSide ? diff < 0 ? 0.15 : 0.1 : diff < 0 ? 0.1 : 0.15,
                            title: rightSide ? diff < 0 ? 0.1 : 0.15 : diff < 0 ? 0.15 : 0.1
                        };
                        // Update the mouse position values given the previous calculated lerp value
                        this.lastMousePos.toggle.x = MathUtils.lerp(this.lastMousePos.toggle.x, mousePos.x - this
                            .bounds.toggle.width / 2, lerpFactor.toggle);
                        this.lastMousePos.toggle.y = MathUtils.lerp(this.lastMousePos.toggle.y, mousePos.y - this
                            .bounds.toggle.height / 2, lerpFactor.toggle);
                        this.lastMousePos.title.x = MathUtils.lerp(this.lastMousePos.title.x, mousePos.x - this
                            .bounds.title.width / 2, lerpFactor.title);
                        this.lastMousePos.title.y = MathUtils.lerp(this.lastMousePos.title.y, mousePos.y - this
                            .bounds.title.height / 2, lerpFactor.title);
                        // Also the scale and opacity values for the toggle
                        this.lastScale = MathUtils.lerp(this.lastScale, 1, 0.15);
                        this.lastOpacity = MathUtils.lerp(this.lastOpacity, 1, 0.1);
                        // Apply the styles
                        this.DOM.toggle.style.transform =
                            `translateX(${(this.lastMousePos.toggle.x)}px) translateY(${this.lastMousePos.toggle.y}px) scale(${this.lastScale})`;
                        this.DOM.toggle.style.opacity = this.lastOpacity;
                        this.DOM.title.style.transform =
                            `translateX(${(this.lastMousePos.title.x)}px) translateY(${this.lastMousePos.title.y}px)`;

                        requestAnimationFrame(() => this.render());
                    }
                    setTitle(title) {
                        // Sets the title content
                        this.DOM.title.innerHTML = title;
                    }
                    click() {
                        // Scales down and fades out the mouse toggle
                        this.lastScale = .5;
                        this.lastOpacity = 0;
                    }
                    toggle() {
                        const isCircle = this.DOM.toggle.classList.contains('cursor__inner--circle');
                        this.DOM.toggle.classList[isCircle ? 'remove' : 'add']('cursor__inner--circle');
                        this.DOM.toggle.classList[isCircle ? 'add' : 'remove']('cursor__inner--cross');
                        this.DOM.title.style.opacity = isCircle ? 0 : 1;
                    }
                }

                const cursor = new CursorFx(document.querySelector('.cursor'));

                class Grid {
                    constructor(el) {
                        this.DOM = {
                            el: el
                        };
                        // The grid element
                        this.DOM.grid = this.DOM.el.querySelector('.grid');
                        // Thr grid items
                        this.DOM.items = [...this.DOM.grid.children];
                        this.DOM.items.forEach(item => {
                            const rand = Math.random() < 0.5;
                            item.style.transformOrigin = rand ? '0% 0%' : '100% 0%';
                            item.dataset.rotateDir = rand ? 'l' : 'r';
                        })
                        // totla number of grid items
                        this.itemsTotal = this.DOM.items.length;
                        // The content element ("behind" the grid)
                        this.DOM.content = document.querySelector('.content');
                        this.DOM.contentTitle = this.DOM.content.querySelector('.content__title');
                        // Calculate heights of both the grid wrap and the grid, and also:
                        // . the difference between them (then used for the grid/mousemove translation)
                        // . the number of rows/columns 
                        this.calculateSize();
                        // The grid will be initially translated so it is in the center
                        this.gridTranslation = {
                            x: 0,
                            y: -1 * this.extraHeight / 2
                        };
                        // Linear interpolation easing percentage (for the grid movement on mouse move)
                        this.lerpFactor = 0.04;
                        this.initEvents();
                        requestAnimationFrame(() => this.render());
                    }
                    calculateSize() {
                        // The height of the grid wrap
                        this.height = this.DOM.el.offsetHeight;
                        // The difference between the height of the grid wrap and the height of the grid. This is the amount we can translate the grid
                        this.extraHeight = this.DOM.grid.offsetHeight - this.height;
                        // Number of grid columns. The CSS variable --cell-number gives us the number of rows
                        this.columns = this.itemsTotal / getComputedStyle(this.DOM.grid).getPropertyValue(
                            '--cell-number');
                        // The animejs stagger function needs an array [cols,rows]
                        this.gridDef = [this.columns, this.itemsTotal / this.columns];
                    }
                    initEvents() {
                        // Window resize event 
                        // The lerpFactor will change to 1 so theres no delay when translating the grid (or we would see the gaps on the top and bottom)
                        window.addEventListener('resize', () => {
                            this.lerpFactor = 1;
                            // Recalculate..
                            this.calculateSize();
                            this.columns = this.itemsTotal / getComputedStyle(this.DOM.grid)
                                .getPropertyValue('--cell-number');
                            clearTimeout(this.resizeTimer);
                            this.resizeTimer = setTimeout(() => this.lerpFactor = 0.04, 250);
                        });

                        this.DOM.items.forEach((item, pos) => {
                            // The item's title.
                            const title = item.dataset.title;
                            // Show the title next to the cursor.
                            item.addEventListener('mouseenter', () => cursor.setTitle(title));
                            item.addEventListener('click', () => {
                                // Position of the clicked item
                                this.pos = pos;
                                this.title = title;
                                // Start the effect and show the content behind
                                this.showContent();
                                // Force to show the title next to the cursor (it might not update because of the grid animation - the item under the mouse can be a different one than the one the user moved the mouse to)
                                cursor.setTitle(title);
                            });
                        });

                        // Show back the grid.
                        this.DOM.content.addEventListener('click', () => this.showGrid());
                    }
                    // This is where the main grid effect takes place
                    // Animates the boxes out and reveals the content "behind"
                    showContent() {
                        if (this.isAnimating) {
                            return false;
                        }
                        this.isAnimating = true;
                        // Set the content background image and title
                        this.DOM.content.style.backgroundImage = this.DOM.items[this.pos].querySelector(
                            '.grid__item-inner').style.backgroundImage.replace(/img/g, 'img/large');
                        this.DOM.contentTitle.innerHTML = this.title;
                        // Scales down and fades out the mouse toggle
                        cursor.click();
                        cursor.toggle();

                        this.animation = anime({
                            targets: this.DOM.items,
                            opacity: [{
                                    value: 1,
                                    duration: 500
                                },
                                {
                                    value: 0,
                                    duration: 500,
                                    easing: 'easeInQuad'
                                }
                            ],
                            translateY: [{
                                    value: 0,
                                    duration: 500
                                },
                                {
                                    value: () => anime.random(100, 400),
                                    duration: 500,
                                    easing: 'easeInQuad'
                                }
                            ],
                            rotate: [{
                                    value: target => target.dataset.rotateDir === 'l' ? anime.random(2,
                                        15) : anime.random(-0, -15),
                                    duration: 500,
                                    easing: 'easeInOutSine'
                                },
                                {
                                    value: target => target.dataset.rotateDir === 'l' ? 8 : -8,
                                    duration: 500,
                                    easing: 'easeInQuad'
                                }
                            ],
                            delay: anime.stagger(350, {
                                grid: this.gridDef,
                                from: this.pos
                            })
                        });
                        this.animation.play();
                        this.animation.finished.then(() => {
                            // Pointer events class
                            this.DOM.el.classList.add('grid-wrap--hidden');
                            this.isAnimating = false;
                        });
                    }
                    showGrid() {
                        if (this.isAnimating) {
                            return false;
                        }
                        this.isAnimating = true;
                        cursor.click();
                        cursor.toggle();
                        this.DOM.el.classList.remove('grid-wrap--hidden');
                        // Could have used the reverse() but there seems to be a bug (glitch)..
                        this.animation = anime({
                            targets: this.DOM.items,
                            duration: 300,
                            easing: 'easeOutExpo',
                            opacity: [0, 1],
                            translateY: [200, 0],
                            rotate: [0, 0],
                            delay: anime.stagger(70, {
                                grid: this.gridDef,
                                from: this.pos
                            })
                        });
                        this.animation.finished.then(() => this.isAnimating = false);
                    }
                    // Translate the grid when moving the mouse
                    render() {
                        // The translation will be either 0 or -1*this.extraHeight depending on the position of the mouse on the y-axis
                        this.gridTranslation.y = MathUtils.lerp(this.gridTranslation.y, Math.min(Math.max(MathUtils
                            .lineEq(-1 * this.extraHeight, 0, this.height - this.height * .1, this
                                .height * .1, mousePos.y), -1 * this.extraHeight), 0), this.lerpFactor);
                        this.DOM.grid.style.transform = `translateY(${this.gridTranslation.y}px)`;
                        requestAnimationFrame(() => this.render());
                    }
                }

                // Initialize the grid
                new Grid(document.querySelector('.grid-wrap'));

                // Preload all the images in the page
                imagesLoaded(document.querySelectorAll('.grid__item-inner, img'), {
                    background: true
                }, () => document.body.classList.remove('loading'));
            }
        }
    }
</script>

<style scoped>

</style>